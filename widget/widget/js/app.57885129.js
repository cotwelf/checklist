(function(t){function e(e){for(var n,s,l=e[0],i=e[1],c=e[2],d=0,p=[];d<l.length;d++)s=l[d],o[s]&&p.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var i=a[l];0!==o[i]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),o=a.n(n);o.a},"14ba":function(t,e,a){},2347:function(t,e,a){},"245a":function(t,e,a){"use strict";a.r(e);var n=a("f499"),o=a.n(n),r=(a("ac6a"),a("e814")),s=a.n(r),l={getData:function(t){if(window.localStorage[t]){var e=JSON.parse(window.localStorage[t]);return e}var a=[];return a},today:function(){var t=new Date;return t.toLocaleDateString()},remainDays:function(t){var e=Date.parse(t),a=Date.parse(new Date),n=Math.abs(s()((a-e)/1e3/3600/24))+1;return n||0},plansSort:function(t){for(var e=[1,2,3,4],a=[],n=function(n){a=a.concat(t.filter(function(t){return t.level==e[n]}))},o=0;o<e.length;o++)n(o);return a}},i=l,c=a("96eb");c.mock("/api/getplans/mock",function(t,e){console.log("plan_mock");var a=c.mock({"items|10":[{created_at:'@date("yyyy/MM/dd")',"done|0-10.2":1,"dose|0-5.2":1,end_at:"2020/3/3",name:"@cname()",id:"@integer(100,500)","level|1":[1,2,3,4],"per|0-5.2":1,pid:"@integer(100,500)","status|1":[10],"total|10-100.2":1,"type|1":[1,5,6,7],"unit|":["课","页","节"],"ver|1":[1,2]}]});return a}),c.mock("/api/getplans",function(t,e){var a=i.getData("plans");if(JSON.parse(t.body).pid)return i.plansSort(a.filter(function(e){return e.pid==JSON.parse(t.body).pid}));var n={};return a.forEach(function(t){t.total==t.done||t.total<t.done?t.status=10:Date.parse(t.end_at)<Date.parse(i.today())?t.status=9:t.status=0,t.update_time!=i.today()&&(t.update_time=i.today(),t.today_done=0),t.per_now=((t.total-0-t.done)/i.remainDays(t.end_at)).toFixed(2)}),localStorage.plans=o()(a),n.alive=a.filter(function(t){return 0==t.status}),n.completed=a.filter(function(t){return 10==t.status}),n.dead=a.filter(function(t){return 9==t.status}),n.show=i.plansSort(a.filter(function(t){var e=new Date,a=e.getDay();return(t.total-t.done)/i.remainDays(t.end_at)>t.per?(t.per_now=(t.total-t.done)/i.remainDays(t.end_at),t.delay=1,t):1==t.type&&0==a?t:5==t.type&&6!=a&&0!=a?t:6==t.type&&0!=a?t:7==t.type?t:t.end_at==i.today()?t:void 0})),n});a("cadf"),a("551c"),a("f751"),a("097d");var u=a("96eb");u.mock("/api/getprojects",function(t,e){var a=i.getData("projects"),n=JSON.parse(t.body);if(n)for(var o={},r=a.length,s=0;s<r;s++){var l=s;if(a[l].id==n.id)return o=a[l],o}return a});a("7514");var d=a("96eb");d.mock("/api/update_plan",function(t,e){var a=JSON.parse(t.body),n=i.getData("plans"),r=n.find(function(t){return t.id==a.plan.id});return n.forEach(function(t){if(t.id==a.plan.id){var e=JSON.parse(a.update_value)-0;t.done+=e,t.today_done+=e}}),r||(a.plan.today_done=0,a.plan.update_time=i.today(),n.push(a.plan)),localStorage.plans=o()(n),n});var p=a("96eb");p.mock("/api/update_project",function(t,e){var a=JSON.parse(t.body),n=i.getData("projects");console.log(n),console.log("data.length"+n.length);for(var r=0,s=0;s<n.length;s++)console.log(n[s].id);return console.log(r),0==r&&(n.push(a),console.log(n),localStorage.projects=o()(n)),n});a("96eb")},"30e8":function(t,e,a){},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=r(t);return a(e)}function r(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}o.keys=function(){return Object.keys(n)},o.resolve=r,t.exports=o,o.id="4678"},"4e43":function(t,e,a){"use strict";var n=a("e681"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{staticClass:"bg",attrs:{src:this.$store.state.global.theme.bgi,alt:""}}),a("header-vue",{staticClass:"header",attrs:{title:t.title}}),a("mu-paper",{attrs:{"z-depth":1}},[a("router-view",{staticClass:"main",on:{getMessage:t.showMsg}})],1),a("footer-vue",{staticClass:"footer",staticStyle:{width:"100%"},attrs:{show:t.show}})],1)},r=[],s={grey:a("9f3d"),pink:a("62ff"),blue:a("cd89")},l=s,i={created:function(){},data:function(){return{show:"",title:"角虫养成计划",bgi:"@/assets/img/bgm/bg.png"}},methods:{showMsg:function(t){this.show=t}}},c=i,u=(a("034f"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,null,null),p=d.exports,m=a("30f4"),f=a("dd88"),h=a("4d7d"),v=(a("aa12"),a("d6f6"),a("2f62")),b=a("bc3a"),j=a.n(b),g=(a("30e8"),a("c1df"),a("8c4f")),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-appbar",{staticStyle:{height:"100px","padding-top":"10%"},attrs:{color:this.$store.state.global.theme.color}},[t._v("\n    "+t._s(t.title)+"\n    ")])],1)},y=[],w={props:["title"],data:function(){return{}},methods:{}},k=w,x=Object(u["a"])(k,_,y,!1,null,"a7660554",null),S=x.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-container",[a("mu-bottom-nav",{attrs:{value:t.show,color:this.$store.state.global.theme.color,shift:""},on:{"update:value":function(e){t.show=e}}},[a("mu-bottom-nav-item",{attrs:{value:"project",title:"项目进度",icon:":iconfont icon-fenlei1",to:{name:"project"}}}),a("mu-bottom-nav-item",{attrs:{value:"todo",title:"今日计划",icon:":iconfont\n         icon-yanchurili",to:{name:"home"}}}),a("mu-bottom-nav-item",{attrs:{value:"mine",title:"我的",icon:":iconfont icon-wodedamaijihuo",to:{name:"mine"}}})],1)],1)],1)},D=[],O={props:["show"],created:function(){},data:function(){return{shift:"todo",theme:""}},methods:{}},z=O,C=(a("f267"),Object(u["a"])(z,F,D,!1,null,null,null)),A=C.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan_list_box"},[a("mu-button",{directives:[{name:"show",rawName:"v-show",value:!t.todo_list,expression:"!todo_list"}],attrs:{color:this.$store.state.global.theme.color,to:{name:"project"}}},[t._v("没有进行中的计划，戳我去添加~")]),a("mu-list",{directives:[{name:"show",rawName:"v-show",value:t.todo_list,expression:"todo_list"}],attrs:{textline:"two-line"}},[a("mu-sub-header",[t._v("今天也要元气满满加油鸭O(∩_∩)O~~")]),t._l(t.todo_list,function(e){return a("plan-item",{key:e.id,attrs:{plan:e},on:{"checked-plan":t.checkedPlan}})})],2),t.done_list.length?a("mu-list",{staticClass:"add_margin",attrs:{textline:"two-line"}},[a("mu-sub-header",[t._v("以下为今日份已完成的任务菌们")]),t._l(t.done_list,function(e){return a("plan-item",{key:e.id,attrs:{plan:e,done:1},on:{"checked-plan":t.checkedPlan}})})],2):t._e()],1)},M=[],E=a("f499"),N=a.n(E),T=(a("c5f6"),a("e814")),J=a.n(T),R=a("21a6");function L(){var t=new Date;return t.toLocaleDateString()}function q(t){if(!t)return t="[]",[];if(JSON.parse(t).length>0){var e=JSON.parse(t);return e}}function H(){var t=new Date;return t.getTime()}function G(t){var e=t-0;return J()(e)==e?e:J()(100*e)<=100*e?Math.round(100*e)/100:J()(10*e)==10*e?J()(10*e)/10:void 0}function U(t){var e=Date.parse(t),a=Date.parse(new Date),n=Math.abs(J()((a-e)/1e3/3600/24))+1;return n||0}function B(t,e){var a=N()(t),n=new Blob([a],{type:"text/plain;charset=utf-8"});Object(R["saveAs"])(n,e+".json")}var I=a("795b"),V=a.n(I),K=j.a.create({baseURL:"/",timeout:5e3});K.interceptors.request.use(function(t){return t},function(t){return V.a.reject(t)}),K.interceptors.response.use(function(t){return t},function(t){return V.a.reject(t)});var Q=K,W={getList:function(t){var e=Q({method:"get",url:"/api/getplans",data:{pid:t}});return e},updatePlan:function(t,e){var a=Q({method:"post",url:"/api/update_plan",data:{plan:{id:t.id,ver:t.planver,name:t.planname,created_at:t.created_at,end_at:t.end_at,total:t.plantotal,per:t.per,unit:t.planunit,level:t.planlevel,type:t.plantype,pid:t.pid,status:t.status,done:t.done,today_done:""|t.today_done,per_now:t.per_now|t.per},update_value:N()(e)}});return a}},X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-list-item",{attrs:{avatar:"",ripple:!1,button:""}},[a("mu-list-item-content",[a("mu-list-item-title",[a("mu-icon",{attrs:{size:"20",value:":iconfont icon-weiguanzhu",color:t.iconColor(t.plan.level)}}),a("span",{class:{done:t.done}},[t._v(t._s(t.plan.name))])],1),t.done?a("mu-list-item-sub-title",[t._v("今日已完成"+t._s(t.dataHelper(t.plan.today_done)+t.plan.unit)+"~加个鸡腿~")]):a("mu-list-item-sub-title",{class:{delay:t.plan.delay}},[t._v(t._s("今日已完成:"+t.dataHelper(t.plan.today_done)+",待完成:"+t.dataHelper((t.plan.delay?t.plan.per_now:t.plan.per)-t.plan.today_done)+t.plan.unit))])],1),a("mu-list-item-action",[a("mu-checkbox",{attrs:{color:"yellow700",value:t.plan.id,"uncheck-icon":":iconfont icon-xuanzhong"},on:{click:t.checked}})],1)],1)],1)},Y=[],Z={props:["plan","done"],created:function(){},data:function(){return{}},methods:{dataHelper:function(t){return G(t)},checked:function(){this.$emit("checked-plan",this.plan)},iconColor:function(t){switch(t){case 1:return"red400";case 2:return"yellow800";case 3:return"blue300";case 4:return"green200"}}}},tt=Z,et=(a("4e43"),Object(u["a"])(tt,X,Y,!1,null,"1099a302",null)),at=et.exports,nt={components:{planItem:at},created:function(){this.getPlans(),this.$emit("getMessage",this.show),$("body,html").animate({scrollTop:0},100)},computed:{},data:function(){return{show:"todo",selects:[],todo_list:[],done_list:[],vers:[{name:"普通计划（当天完成定量）",value:0},{name:"角虫养成计划（当天可多次完成）",value:1},{name:"项目计划（当天完成定量，有目标）",value:2}]}},methods:{getPlans:function(){var t=this;W.getList().then(function(e){console.log(e.data),t.todo_list=e.data.show.filter(function(t){return!t.delay&&t.today_done<t.per?t:t.delay&&t.today_done<t.per_now?t:void 0}),t.done_list=e.data.show.filter(function(t){return!t.delay&&t.today_done>=t.per?t:t.delay&&t.today_done>=t.per_now?t:void 0})}).catch(function(t){alert(error)})},checkedPlan:function(t){var e=this;console.log("checkedPlan"),this.$prompt("今日已完成"+G(t.today_done)+"，全部剩余"+G(100*(t.total-t.done)/t.total)+"%","请输入完成量",{validator:function(t){return{valid:/[0-9]/.test(t),message:"请输入数字"}}}).then(function(a){var n=a.result,o=a.value;n?W.updatePlan(t,o).then(function(a){e.getPlans(),e.$toast.message("继续加油鸭"),!(t.today_done>t.per_now)&&$("#"+id).fadeOut()}).catch(function(t){}):e.$toast.message("少年还需努力啊")})}},position:"bottom-end",close:!1},ot=nt,rt=(a("5c32"),Object(u["a"])(ot,P,M,!1,null,"b3b1780c",null)),st=rt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-grid-list",{staticClass:"project"},[a("mu-sub-header",[t._v(t._s(t.list.length?"进行中":"先点击下方按钮新建项目吧~"))]),t._l(t.projects,function(t){return a("project-item",{key:t.id,staticClass:"project_list",attrs:{project:t}})}),a("mu-button",{staticClass:"add",attrs:{fab:"",color:this.$store.state.global.theme.color},on:{click:t.ensure}},[a("mu-icon",{attrs:{value:":iconfont icon-jiajianzujianjiahao"}})],1)],2),a("mu-dialog",{attrs:{title:"你的项目菌们很蓝瘦",width:"360",open:t.openSimple},on:{"update:open":function(e){t.openSimple=e}}},[t._v("\n    你已经拥有4个项目菌啦！先好好对待他们~\n    "),a("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.closeSimpleDialog},slot:"actions"},[t._v("宝宝们我错了")])],1)],1)},it=[],ct=(a("c5a3"),{getProjects:function(t){var e=Q({method:"get",url:"/api/getprojects",data:{status:0,id:t||""}});return e},updateProject:function(t){var e=Q({method:"post",url:"/api/update_project",data:t});return e}}),ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-expansion-panel",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      "+t._s(t.project.name)+"\n      "),a("b",[t._v(t._s(t.remain()))]),t._v("天后结束\n    ")]),t._l(t.plans,function(e){return a("div",{key:e.id,staticClass:"list"},[t._v(t._s(e.name))])}),a("mu-button",{attrs:{slot:"action",flat:"",color:"primary",to:{name:"newplan",query:{pid:t.project.id}}},slot:"action"},[t._v("新建计划")])],2)],1)},dt=[],pt={props:["project"],created:function(){var t=this;W.getList(this.project.id).then(function(e){t.plans=e.data})},data:function(){return{plans:[]}},methods:{remain:function(){return U(this.project.end_at)}}},mt=pt,ft=Object(u["a"])(mt,ut,dt,!1,null,"232ae368",null),ht=ft.exports,vt={components:{projectItem:ht},computed:{},mounted:function(){this.$emit("getMessage",this.show)},created:function(){var t=this;ct.getProjects().then(function(e){t.projects=e.data}),$("body,html").animate({scrollTop:0},100)},data:function(){return{projects:[],openAlert:!1,indexes:"",open:!1,show:"project",openSimple:!1,plans:"",openFullscreen:!1,list:[],vers:[{name:"角虫养成计划（当天可多次完成）",value:1},{name:"项目计划（当天完成定量，有目标）",value:2}],project_id:""}},methods:{closeSimpleDialog:function(){this.openSimple=!1},ensure:function(){this.list.length>4||4==this.list.length?this.openSimple=!0:this.$router.push({name:"newproject"})}}},bt=vt,jt=(a("d838"),Object(u["a"])(bt,lt,it,!1,null,"757d3eb2",null)),gt=jt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-form",{ref:"form",staticClass:"projectform",attrs:{model:t.validateForm}},[a("mu-form-item",{attrs:{label:"项目名称","help-text":"汉字、字母或字符，不要超过10个字",prop:"projectname",rules:t.projectnameRules}},[a("mu-text-field",{attrs:{id:"name",color:this.$store.state.global.theme.color,prop:"projectname"},model:{value:t.validateForm.projectname,callback:function(e){t.$set(t.validateForm,"projectname",e)},expression:"validateForm.projectname"}})],1),a("mu-form-item",{attrs:{label:"开始时间",prop:"projectstart",rules:t.startRules}},[a("mu-date-input",{attrs:{id:"start",color:this.$store.state.global.theme.color,"full-width":"",prop:"projectstart","no-display":"",container:"bottomSheet"},model:{value:t.validateForm.projectstart,callback:function(e){t.$set(t.validateForm,"projectstart",e)},expression:"validateForm.projectstart"}})],1),a("mu-form-item",{attrs:{label:"结束时间",prop:"projectend",rules:t.endRules}},[a("mu-date-input",{attrs:{id:"end",color:this.$store.state.global.theme.color,"full-width":"",prop:"projectend","no-display":"",container:"bottomSheet"},model:{value:t.validateForm.projectend,callback:function(e){t.$set(t.validateForm,"projectend",e)},expression:"validateForm.projectend"}})],1),a("mu-form-item",{staticClass:"button_box"},[a("mu-button",{attrs:{color:this.$store.state.global.theme.color},on:{click:t.submit}},[t._v("创建")]),a("mu-button",{attrs:{to:{name:"project"}}},[t._v("返回")])],1)],1)],1)},yt=[],wt=(a("aede"),{props:["list"],mounted:function(){this.$emit("getMessage",this.show)},created:function(){var t=localStorage.projects;console.log(t),$("body,html").animate({scrollTop:0},100)},data:function(){return{show:"project",openAlert:!1,projectnameRules:[{validate:function(t){return!!t},message:"必须填写项目名称"},{validate:function(t){return t.length<11},message:"项目名称太长啦臣妾记不住啊"}],startRules:[{validate:function(t){return!!t},message:"请选择时间"}],endRules:[{validate:function(t){return!!t},message:"请选择时间"},{validate:function(t){return Date.parse(t)>=Date.parse($("#start").val())},message:"结束时间不要小于开始时间哦~"}],validateForm:{projectname:"",projectstart:"",projectend:""}}},methods:{submit:function(){var t=this;this.$refs.form.validate().then(function(e){if(console.log(55555),e){var a={};a.id=H(),a.name=t.validateForm.projectname.trim(),a.start_at=t.validateForm.projectstart.toLocaleDateString(),a.end_at=t.validateForm.projectend.toLocaleDateString(),console.log(a),ct.updateProject(a).then(function(t){console.log(t)}),console.log(localStorage.projects)}})},openAlertDialog:function(){this.openAlert=!0},closeAlertDialog:function(){this.openAlert=!1}}}),kt=wt,xt=Object(u["a"])(kt,_t,yt,!1,null,"43237d56",null),St=xt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("mu-paper",{staticStyle:{height:"100%"},attrs:{"z-depth":1}},[a("mu-list",[a("mu-list-item",{attrs:{button:""},on:{click:function(e){t.openAlert=!0}}},[a("mu-list-item-action",[a("mu-icon",{attrs:{value:":iconfont icon-fenxiang"}})],1),a("mu-list-item-title",[t._v("删除数据")])],1),a("mu-list-item",{attrs:{button:""},on:{click:t.update}},[a("mu-list-item-action",[a("mu-icon",{attrs:{value:":iconfont icon-fenxiang"}})],1),a("mu-list-item-title",[t._v("保留数据")])],1),a("mu-list-item",{attrs:{button:""},on:{click:t.loadData}},[a("mu-list-item-action",[a("mu-icon",{attrs:{value:":iconfont icon-fenxiang"}})],1),a("mu-list-item-title",[t._v("导入测试数据")])],1)],1),a("mu-dialog",{attrs:{title:"确定要清除数据吗？",width:"600","max-width":"80%","esc-press-close":!1,"overlay-close":!1,open:t.openAlert},on:{"update:open":function(e){t.openAlert=e}}},[t._v("\n      删除后不可恢复\n      "),a("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(e){t.openAlert=!1}},slot:"actions"},[t._v("手滑了")])],1)],1)],1)},Ft=[],Dt=a("7e56"),Ot=a("b7ee"),zt={mounted:function(){this.$emit("getMassage",this.show)},created:function(){$("body,html").animate({scrollTop:0},100),this.$emit("getMessage",this.show)},data:function(){return{openAlert:!1,show:"mine"}},methods:{loadData:function(){localStorage.plans=N()(Dt),localStorage.projects=N()(Ot)},update:function(){localStorage.projects&&B(JSON.parse(localStorage.projects),"projects"),localStorage.plans&&B(JSON.parse(localStorage.plans),"plans"),localStorage.record&&B(JSON.parse(localStorage.record),"record")},clear:function(){localStorage.clear(),this.openAlert=!1}}},Ct=zt,At=Object(u["a"])(Ct,$t,Ft,!1,null,null,null),Pt=At.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-form",{ref:"form",staticClass:"newplanmain",attrs:{model:t.validateForm}},[a("mu-form-item",{attrs:{label:"计划名称","help-text":"汉字、字母或字符，不要超过10个字",prop:"planname",rules:t.plannameRules}},[a("mu-text-field",{attrs:{color:this.$store.state.global.theme.color,prop:"planname"},model:{value:t.validateForm.planname,callback:function(e){t.$set(t.validateForm,"planname",e)},expression:"validateForm.planname"}})],1),a("mu-form-item",{attrs:{label:"总目标","help-text":"数字，如100，不要超过10位数",prop:"plantotal",rules:t.plantotalRules}},[a("mu-text-field",{attrs:{color:this.$store.state.global.theme.color,type:"number",prop:"plantotal"},model:{value:t.validateForm.plantotal,callback:function(e){t.$set(t.validateForm,"plantotal",e)},expression:"validateForm.plantotal"}})],1),a("mu-form-item",{attrs:{label:"单位","help-text":"数字，如页、课、小时等，不要超过5个字",prop:"planunit",rules:t.planunitRules}},[a("mu-text-field",{attrs:{color:this.$store.state.global.theme.color,prop:"planunit"},model:{value:t.validateForm.planunit,callback:function(e){t.$set(t.validateForm,"planunit",e)},expression:"validateForm.planunit"}})],1),a("mu-form-item",{staticClass:"radio",attrs:{label:"优先级",prop:"planlevel"}},t._l(t.levels,function(e,n){return a("mu-flex",{key:n,staticClass:"select-control-row"},[a("mu-radio",{staticClass:"radios",attrs:{color:this.$store.state.global.theme.color,value:e.value,label:e.name},model:{value:t.validateForm.planlevel,callback:function(e){t.$set(t.validateForm,"planlevel",e)},expression:"validateForm.planlevel"}})],1)}),1),a("mu-form-item",{staticClass:"radio",attrs:{label:"周重复天数",prop:"plantype"}},t._l(t.types,function(e,n){return a("mu-flex",{key:n,staticClass:"select-control-row"},[a("mu-radio",{staticClass:"radios",attrs:{color:this.$store.state.global.theme.color,value:e.value,label:e.name},model:{value:t.validateForm.plantype,callback:function(e){t.$set(t.validateForm,"plantype",e)},expression:"validateForm.plantype"}})],1)}),1),a("mu-form-item",{staticClass:"button_box"},[a("mu-button",{attrs:{color:this.$store.state.global.theme.color},on:{click:t.submit}},[t._v("下一步")]),a("mu-button",{attrs:{to:{name:"home"}}},[t._v("返回")])],1),a("mu-dialog",{attrs:{title:"每日完成"+t.validateForm.per+t.validateForm.planunit,width:"600","max-width":"80%","esc-press-close":!1,"overlay-close":!1,open:t.openAlert},on:{"update:open":function(e){t.openAlert=e}}},[t._v("\n      剩余"+t._s(t.remain_days)+"天\n      "),a("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.closeAlertDialog},slot:"actions"},[t._v("返回修改")]),a("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.createPlan},slot:"actions"},[t._v("领养计划")])],1)],1)],1)},Et=[],Nt={mounted:function(){this.$emit("getMessage",this.show)},created:function(){var t=this;$("body,html").animate({scrollTop:0},100);var e=this.$route.query.pid;ct.getProjects(e).then(function(a){console.log(a.data),t.validateForm.end_at=a.data.end_at,t.validateForm.pid=e})},data:function(){return{ver:"",remain_days:"",now:"",list:[],show:"project",openAlert:!1,types:[{name:"7天（周一~周日）",value:7},{name:"6天（周一~周六）",value:6},{name:"5天（周一~周五）",value:5},{name:"1天（周日）",value:1}],levels:[{name:"很重要（当天必须完成）",value:1},{name:"一般重要（可以推到第二天）",value:2},{name:"重要（没有明确规定完成时间）",value:3},{name:"不重要（仅备忘）",value:4}],plannameRules:[{validate:function(t){return!!t},message:"必须填写计划名称"},{validate:function(t){return t.length<=10},message:"计划名称太长啦臣妾记不住啊"}],plantotalRules:[{validate:function(t){return!!t},message:"必须填写总目标"},{validate:function(t){return t.length<=10},message:"大佬你确定这辈子可以完成？（害怕脸）"}],planunitRules:[{validate:function(t){return!!t},message:"必须填写单位"},{validate:function(t){return t.length<=5},message:"哇~单位这么长的嘛？"}],validateForm:{id:H(),planname:"",plantotal:"",per:"",planunit:"",plantype:7,pid:0,planver:0,planlevel:1,created_at:"",end_at:"",status:0,done:0}}},watch:{validateForm:{deep:!0,handler:function(t,e){console.log(t.planlevel)}}},methods:{freshData:function(){},openFullscreenDialog:function(){this.openFullscreen=!0},openAlertDialog:function(){this.openAlert=!0},closeAlertDialog:function(){this.openAlert=!1},createPlan:function(){var t=this;console.log(this.validateForm),W.updatePlan(this.validateForm).then(function(e){t.$router.push({name:"project"})})},submit:function(){var t=this;this.$refs.form.validate().then(function(e){t.validateForm.created_at=L(),t.remain_days=U(t.validateForm.end_at)?U(t.validateForm.end_at):1,e&&(t.validateForm.per=(t.validateForm.plantotal/t.remain_days).toFixed(2),t.openAlertDialog())})}}},Tt=Nt,Jt=Object(u["a"])(Tt,Mt,Et,!1,null,"16d649d8",null),Rt=Jt.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},t._l(t.plans,function(e,n){return a("mu-expansion-panel",{key:n,style:t.statusColor(e.status)},[a("div",{attrs:{slot:"header"},slot:"header"},[a("mu-icon",{attrs:{size:"20",value:":iconfont icon-weiguanzhu",color:t.iconColor(e.level)}}),t._v("\n      "+t._s(e.name)+"\n    ")],1),t._v("\n    "+t._s(t.statusText(e.status))+"，共"+t._s(e.total)+t._s(e.unit)+",已完成"+t._s(e.done)+t._s(e.unit)+",剩余"+t._s(e.total-e.done)+t._s(e.unit)+"，计划进行到"+t._s(Math.floor(e.done/e.total*100))+"%\n    "),0==e.status?a("mu-button",{attrs:{slot:"action",flat:""},on:{click:function(a){t.kill(e.id)}},slot:"action"},[t._v("结束这个计划")]):t._e()],1)}),1)},qt=[],Ht={computed:{},mounted:function(){this.$emit("getMessage",this.show)},created:function(){$("body,html").animate({scrollTop:0},100),this.p_id=this.$route.query.id,this.refresh()},data:function(){return{openAlert:!1,p_id:"",show:"project",plans:[]}},methods:{refresh:function(){for(var t=q(localStorage.plans),e=0;e<t.length;e++){var a=e;console.log(t[e].pid),t[a].pid==this.p_id&&this.plans.push(t[a])}},iconColor:function(t){switch(t){case 1:return"red400";case 2:return"yellow800";case 3:return"blue300";case 4:return"green200"}},statusColor:function(t){switch(t){case 0:return"background-color:#fafafa";case 10:return"background-color:#eeeeee";case 9:return"background-color:#eeeeee"}},statusText:function(t){switch(t){case 0:return"任务正在进行中";case 10:return"任务已完成~撒花";case 9:return"很遗憾，任务已结束"}},kill:function(t){console.log(this.plans.length);for(var e=0;e<this.plans.length;e++){console.log("233");var a=e;console.log(a),this.plans[e].id==t&&(this.plans[a].status=10)}console.log(this.plans),localStorage.plans=N()(this.plans)}}},Gt=Ht,Ut=(a("adbb"),Object(u["a"])(Gt,Lt,qt,!1,null,"7d2cfc75",null)),Bt=Ut.exports;n["a"].use(g["a"]),n["a"].component("headerVue",S),n["a"].component("footerVue",A);var It=[{path:"/",redirect:{name:"home"}},{name:"home",path:"/todo",component:st},{name:"project",path:"/projects",component:gt,children:[]},{name:"pro_detail",path:"/project_detail",component:Bt},{name:"mine",path:"/mine",component:Pt},{name:"newproject",path:"/projects/new",component:St},{name:"newplan",path:"/plan/new",component:Rt}],Vt=new g["a"]({scrollBehavior:function(){return{y:0}},routes:It}),Kt={state:{plans:[],projects:[],test:"23333333333"},mutations:{GET_PLANS:function(t,e){t.plans=e}},actions:{}},Qt=Kt,Wt={state:{plans:[],projects:[]},mutations:{GET_PLANS:function(t,e){t.plans=e}},actions:{}},Xt=Wt,Yt={test:function(t){return t.projects.test}},Zt=Yt,te={state:{theme_all:[{color:"grey700",bgi:l.grey},{color:"pink200",bgi:l.pink},{color:"blue200",bgi:l.blue}],theme:{color:"grey700",bgi:l.grey}},mutations:{CHANGE_THEME:function(t,e){t.theme=e}}},ee=te;n["a"].use(v["a"]);var ae=new v["a"].Store({modules:{users:Xt,projects:Qt,global:ee},getters:Zt}),ne=ae;n["a"].use(m["a"]),n["a"].use(h["a"]),n["a"].use(f["a"],{close:!1,position:"bottom"}),n["a"].use(v["a"]),n["a"].prototype.$axios=j.a,n["a"].config.productionTip=!1,a("245a"),new n["a"]({el:"#app",router:Vt,store:ne,render:function(t){return t(p)}})},"5c32":function(t,e,a){"use strict";var n=a("d998"),o=a.n(n);o.a},"62ff":function(t,e,a){t.exports=a.p+"img/pink.5d09d080.jpg"},"64a9":function(t,e,a){},"78eb":function(t,e,a){},"7e56":function(t){t.exports=[{id:1580973975873,ver:0,name:"正常，未更新",created_at:"2020/2/6",end_at:"2020/2/6",total:"123",per:"123.00",unit:"是",level:4,type:7,pid:1580973969207,status:0,done:0,today_done:0,per_now:123,update_time:"2020/2/2"},{id:1580975214868,ver:0,name:"dsa",created_at:"2020/2/6",end_at:"2020/2/6",total:"112",per:"112.00",unit:"q",level:1,type:7,pid:1580973969207,status:0,done:1.11,today_done:1.11,per_now:110.89,update_time:"2020/2/6"},{id:1580971114821,ver:0,name:"明日结束-今日未更新时间",created_at:"2020/2/6",end_at:"2020/2/6",total:"125",per:"20.00",unit:"q",level:1,type:7,pid:1580973969207,status:0,done:1.11,today_done:18,per_now:10,update_time:"2020/2/3"},{id:1580973962287,ver:0,name:"很久后结束-今日操作完成",created_at:"2020/2/6",end_at:"2020/12/6",total:"125",per:"20.00",unit:"q",level:1,type:7,pid:1580973962987,status:0,done:1.11,today_done:18,per_now:10,update_time:"2020/2/3"}]},"9f3d":function(t,e,a){t.exports=a.p+"img/grey.eca7cb0e.png"},adbb:function(t,e,a){"use strict";var n=a("78eb"),o=a.n(n);o.a},aede:function(t,e,a){},b7ee:function(t){t.exports=[{id:1580973969207,name:"当天结束",start_at:"2020/2/6",end_at:"2020/2/6"},{id:1580973962987,name:"很久后结束",start_at:"2020/2/6",end_at:"2020/12/6"}]},c5a3:function(t,e,a){t.exports=a.p+"img/1.f478609a.jpg"},cd89:function(t,e,a){t.exports=a.p+"img/blue.830c6c2c.jpg"},d838:function(t,e,a){"use strict";var n=a("2347"),o=a.n(n);o.a},d998:function(t,e,a){},e681:function(t,e,a){},f267:function(t,e,a){"use strict";var n=a("14ba"),o=a.n(n);o.a}});
//# sourceMappingURL=app.57885129.js.map